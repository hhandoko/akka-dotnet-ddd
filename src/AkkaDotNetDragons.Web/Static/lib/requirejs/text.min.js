define(["module"],function(k){var m,h,c,d,o,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i=typeof location!=="undefined"&&location.href,g=i&&location.protocol&&location.protocol.replace(/\:/,""),e=i&&location.hostname,f=i&&(location.port||undefined),b={},j=(k.config&&k.config())||{};m={version:"2.0.14",strip:function(p){if(p){p=p.replace(n,"");var q=p.match(a);if(q){p=q[1]}}else{p=""}return p},jsEscape:function(p){return p.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:j.createXhr||function(){var s,q,r;if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest()}else{if(typeof ActiveXObject!=="undefined"){for(q=0;q<3;q+=1){r=l[q];try{s=new ActiveXObject(r)}catch(p){}if(s){l=[r];break}}}}return s},parseName:function(t){var s,p,v,u=false,q=t.lastIndexOf("."),r=t.indexOf("./")===0||t.indexOf("../")===0;if(q!==-1&&(!r||q>1)){s=t.substring(0,q);p=t.substring(q+1)}else{s=t}v=p||s;q=v.indexOf("!");if(q!==-1){u=v.substring(q+1)==="strip";v=v.substring(0,q);if(p){p=v}else{s=v}}return{moduleName:s,ext:p,strip:u}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(w,s,p,r){var v,t,u,q=m.xdRegExp.exec(w);if(!q){return true}v=q[2];t=q[3];t=t.split(":");u=t[1];t=t[0];return(!v||v===s)&&(!t||t.toLowerCase()===p.toLowerCase())&&((!u&&!t)||u===r)},finishLoad:function(q,s,p,r){p=s?m.strip(p):p;if(j.isBuild){b[q]=p}r(p)},load:function(q,u,s,p){if(p&&p.isBuild&&!p.inlineText){s();return}j.isBuild=p&&p.isBuild;var t=m.parseName(q),r=t.moduleName+(t.ext?"."+t.ext:""),v=u.toUrl(r),w=(j.useXhr)||m.useXhr;if(v.indexOf("empty:")===0){s();return}if(!i||w(v,g,e,f)){m.get(v,function(x){m.finishLoad(q,t.strip,x,s)},function(x){if(s.error){s.error(x)}})}else{u([r],function(x){m.finishLoad(t.moduleName+"."+t.ext,t.strip,x,s)})}},write:function(s,r,t,p){if(b.hasOwnProperty(r)){var q=m.jsEscape(b[r]);t.asModule(s+"!"+r,"define(function () { return '"+q+"';});\n")}},writeFile:function(v,s,w,x,p){var u=m.parseName(s),q=u.ext?"."+u.ext:"",t=u.moduleName+q,r=w.toUrl(u.moduleName+q)+".js";m.load(t,w,function(z){var y=function(A){return x(r,A)};y.asModule=function(B,A){return x.asModule(B,r,A)};m.write(v,t,y,p)},p)}};if(j.env==="node"||(!j.env&&typeof process!=="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])){h=require.nodeRequire("fs");m.get=function(t,p,r){try{var s=h.readFileSync(t,"utf8");if(s[0]==="\uFEFF"){s=s.substring(1)}p(s)}catch(q){if(r){r(q)}}}}else{if(j.env==="xhr"||(!j.env&&m.createXhr())){m.get=function(t,p,q,s){var u=m.createXhr(),r;u.open("GET",t,true);if(s){for(r in s){if(s.hasOwnProperty(r)){u.setRequestHeader(r.toLowerCase(),s[r])}}}if(j.onXhr){j.onXhr(u,t)}u.onreadystatechange=function(w){var x,v;if(u.readyState===4){x=u.status||0;if(x>399&&x<600){v=new Error(t+" HTTP status: "+x);v.xhr=u;if(q){q(v)}}else{p(u.responseText)}if(j.onXhrComplete){j.onXhrComplete(u,t)}}};u.send(null)}}else{if(j.env==="rhino"||(!j.env&&typeof Packages!=="undefined"&&typeof java!=="undefined")){m.get=function(x,p){var w,u,r="utf-8",s=new java.io.File(x),v=java.lang.System.getProperty("line.separator"),t=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),r)),q="";try{w=new java.lang.StringBuffer();u=t.readLine();if(u&&u.length()&&u.charAt(0)===65279){u=u.substring(1)}if(u!==null){w.append(u)}while((u=t.readLine())!==null){w.append(v);w.append(u)}q=String(w.toString())}finally{t.close()}p(q)}}else{if(j.env==="xpconnect"||(!j.env&&typeof Components!=="undefined"&&Components.classes&&Components.interfaces)){c=Components.classes;d=Components.interfaces;Components.utils["import"]("resource://gre/modules/FileUtils.jsm");o=("@mozilla.org/windows-registry-key;1" in c);m.get=function(v,p){var t,q,s,u={};if(o){v=v.replace(/\//g,"\\")}s=new FileUtils.File(v);try{t=c["@mozilla.org/network/file-input-stream;1"].createInstance(d.nsIFileInputStream);t.init(s,1,0,false);q=c["@mozilla.org/intl/converter-input-stream;1"].createInstance(d.nsIConverterInputStream);q.init(t,"utf-8",t.available(),d.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);q.readString(t.available(),u);q.close();t.close();p(u.value)}catch(r){throw new Error((s&&s.path||"")+": "+r)}}}}}}return m});